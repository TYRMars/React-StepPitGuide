# React Stateå±æ€§

#### stateçŠ¶æ€

* `state` æ˜¯ç»„ä»¶å†…éƒ¨çš„å±æ€§ã€‚ç»„ä»¶æœ¬äº‹æ˜¯ä¸€ä¸ª`çŠ¶æ€æœº`ï¼Œå®ƒå¯ä»¥åœ¨`constructor`ä¸­é€šè¿‡`this.state`ç›´æ¥å®šä¹‰å®ƒçš„å€¼ï¼Œç„¶åæ ¹æ®è¿™äº›å€¼æ¥æ¸²æŸ“ä¸åŒçš„UIã€‚å½“`state`çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯ä»¥é€šè¿‡`this.setState`æ–¹æ³•è®©ç»„ä»¶å†æ¬¡è°ƒç”¨`render`æ–¹æ³•ï¼Œæ¥æ¸²æŸ“æ–°çš„UIã€‚å½“`state`çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯ä»¥é€šè¿‡`this.setState`æ–¹æ³•å†æ¬¡è°ƒç”¨`render`æ–¹æ³•ï¼Œæ¥æ¸²æŸ“æ–°çš„UIã€‚

#### stateè®¾è®¡åŸåˆ™

* ä»€ä¹ˆç»„ä»¶åº”è¯¥æœ‰`State`ï¼Œè€Œä¸”åº”è¯¥éµå¾ªæœ€å°åŒ–`state`çš„å‡†åˆ™ï¼Ÿé‚£å°±æ˜¯å°½é‡è®©å¤§å¤šæ•°çš„ç»„ä»¶éƒ½æ˜¯æ— çŠ¶æ€çš„ã€‚ä¸ºäº†å®ç°è¿™æ ·çš„ç»“æ„ï¼Œå› è¯¥å°½é‡æŠŠçŠ¶æ€åˆ†ç¦»åœ¨ä¸€äº›ç‰¹å®šçš„ç»„ä»¶ä¸­ï¼Œæ¥é™ä½ç»„ä»¶çš„å¤æ‚ç¨‹åº¦ã€‚æœ€å¸¸è§çš„åšæ³•å°±æ˜¯åˆ›å»ºå°½åŠ›é‚£ä¸ªå¤šçš„æ— çŠ¶æ€ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å”¯ä¸€è¦å…³å¿ƒçš„äº‹æƒ…å°±æ˜¯æ¸²æŸ“æ•°æ®ã€‚è€Œåœ¨è¿™äº›ç»„ä»¶çš„å¤–å±‚ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªåŒ…å«`state`çš„çˆ¶çº§çš„ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶ç”¨äºå¤„ç†å„ç§äº‹ä»¶ã€äº¤æµé€»è¾‘ã€ä¿®æ”¹`state`ã€å¯¹åº”çš„å­ç»„ä»¶è¦å…³å¿ƒçš„åªæ˜¯ä¼ å…¥çš„å±æ€§è€Œå·²
* `state` åº”è¯¥åŒ…å«ä»€ä¹ˆæ•°æ®ï¼Ÿ `state`ä¸­åº”è¯¥åŒ…å«ç»„ä»¶çš„äº‹ä»¶å›è°ƒå‡½æ•°å¯èƒ½å¼•å‘UIæ›´æ–°çš„è¿™ç±»æ•°æ®ã€‚åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œè¿™äº›åº”è¯¥æ˜¯è½»é‡åŒ–çš„JSONæ•°æ®ï¼Œåº”è¯¥å°½é‡æŠŠæ•°æ®çš„è¡¨ç°è®¾è®¡åˆ°æœ€å°ï¼Œè€Œæ›´å¤šçš„æ•°æ®å¯ä»¥åœ¨renderæ–¹æ³•é€šè¿‡å„ç§è®¡ç®—æ¥å¾—åˆ°ã€‚è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¯´ç°åœ¨æœ‰ä¸€ä¸ªå•†å“åˆ—è¡¨ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨æˆ·å·²ç»é€‰è´­çš„å•†å“åˆ—è¡¨ï¼Œæœ€ç›´è§‚çš„è®¾è®¡æ–¹æ³•å¦‚ä¸‹ï¼š

```JavaScript
{
  goods:[
    {
      "id":1,
      "name":"paper"
    },
    {
      "id":2,
      "name":"pencil"
    }
    ...
  ],
  selectedGoods:[
    {
      "id":1,
      "name":"hello world"
    }
  ],
}
```

* è¿™æ ·åšå½“ç„¶å¯ä»¥ï¼Œä½†æ ¹æ®æœ€å°åŒ–è®¾è®¡`state`åŸåˆ™ï¼Œè¿˜æ˜¯æœ‰æ›´å¥½çš„æ–¹æ³•ï¼ï¼ï¼
* `selectedGoods` çš„å•†å“å°±æ˜¯goodsé‡Œé¢çš„å‡ é¡¹ï¼Œæ•°æ®æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¯´è¿™é‡Œåªéœ€è¦ä¿å­˜`ID`ï¼Œå°±å¯ä»¥å®ŒæˆåŒæ ·çš„åŠŸèƒ½ã€‚æ‰€ä»¥å¯ä»¥ä¿®æ”¹æˆå¦‚ä¸‹ã€‚

```JavaScript
selectedGoods:[1,2,3]
```

* åœ¨æ¸²æŸ“è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠè¦æ¸²æŸ“çš„æ¡ç›®ä»goodsä¸­å–å‡ºæ¥å°±å¯ä»¥äº†ã€‚
* `state`ä¸åº”è¯¥åŒ…å«ä»€ä¹ˆæ•°æ®ï¼Ÿå°±åƒä¸Šé¢çš„ä¾‹å­æ‰€æè¿°çš„ä¸€æ ·ï¼Œä¸ºäº†è¾¾åˆ°`state`çš„æœ€å°åŒ–ï¼Œä¸‹é¢ğŸ‘‡å‡ ç§æ•°æ®ä¸åº”è¯¥åŒ…å«åœ¨`state`ä¸­
  * å¯ä»¥ç”±stateè®¡ç®—å‡ºçš„æ•°æ®ã€‚å°±åƒselectedGoodsä¸€æ ·ï¼Œå¯ä»¥ç”±goodsåˆ—è¡¨è®¡ç®—å¾—å‡ºã€‚
  * ç»„ä»¶ã€‚ç»„ä»¶ä¸éœ€è¦ä¿å­˜åˆ°stateä¸­ï¼Œåªéœ€è¦åœ¨`render`æ–¹æ³•ä¸­æ¸²æŸ“ã€‚
  * `props`ä¸­çš„æ•°æ®ã€‚`props`å¯ä»¥çœ‹ä½œæ˜¯ç»„ä»¶çš„æ•°æ®æ¥æºï¼Œå®ƒä¸éœ€è¦ä¿å­˜åœ¨`state`ä¸­ã€‚

---

#### state ä½¿ç”¨äº‹ä¾‹

```JavaScript
import React from 'react';
export default class BodyIndex extends React.Component {
  constructor() {
    super(); //è°ƒç”¨åŸºç±»çš„æ‰€æœ‰çš„åˆå§‹åŒ–æ–¹æ³•
    this.state = {
      username: "Parry",
      age:20
    };//åˆå§‹åŒ–èµ‹å€¼
  }
  render() {
    setTimeout(() => {
      //æ›´æ”¹stateçš„æ—¶å€™
      this.setState({username: "IMOOC",age:30})
    }, 4000);

    return (
      <div>
        <h2>é¡µé¢ä¸»é¢˜å†…å®¹</h2>
        <p>{this.state.username} {this.state.age}</p>
      </div>
    )
  }
}
```

* å¯ä»¥ç”¨Chorme Reactç»„ä»¶ä¸­æŸ¥çœ‹åˆ°`state`åªä¼šåœ¨ç›¸åº”çš„æ¨¡å—ä¸­æœ‰å€¼ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–æ¨¡å—ã€‚å®ƒå±äºæ¨¡å—è‡ªèº«å±æ€§ã€‚



